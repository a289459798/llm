syntax = "v1"

type(
    ImageRequest {
        Content string `json:"content"`
        Model string `json:"model,optional,options=gpt|gpt-plus|Midjourney"`
        Number int `json:"number,optional,options=1|4"`
        Clarity string `json:"clarity,optional,options=standard|high"`
    }

    ImageResponse {
        Url string `json:"url"`
        Task string `json:"task"`
    }

    Pic2picRequest {
        Style string `form:"style"`
    }

    Pic2picTaskRequest {
        task string `form:"task"`
    }

    WatermarkRequest {
        Url string `json:"url"`
        Content string `json:"content"`
        Position string `json:"position"`
        Opacity float32 `json:"opacity"`
        FontSize uint `json:"fontSize"`
        Color string `json:"color"`
    }

    ImageMultiResponse {
        Url []string `json:"url"`
    }

    ImageEditRequest {
        Content string `form:"content"`
    }
)

@server(
    jwt: Auth
    middleware: AuthAndUse
    group: image
)
service tools {
    @handler create
    post /images/create (ImageRequest) returns (ImageResponse)

    @handler createMulti
    post /images/create/multi (ImageRequest) returns (ImageMultiResponse)

    @handler watermark
    post /images/watermark (ImageRequest) returns (ImageResponse)

    @handler edit
    post /images/edit (ImageEditRequest) returns (ImageResponse)

    @handler pic2pic
    post /images/pic2pic (Pic2picRequest) returns (ImageResponse)

    @handler pic2pictask
    get /images/pic2pic/task (Pic2picTaskRequest) returns (ImageResponse)
}